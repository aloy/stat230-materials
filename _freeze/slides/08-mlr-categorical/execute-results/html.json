{
  "hash": "b61b10ab6dfe3b027c54ba313cee0132",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Adding Categorical Predictors\"\nsubtitle: \"Stat 230: Applied Regression Analysis\"\nformat: \n  revealjs:\n    theme: [serif, styles.scss]\n    scrollable: true\neditor: source\neditor_options: \n  chunk_output_type: console\ncode-annotations: hover\n---\n\n\n\n## Example {.smaller}\n\n\n:::: {.columns align=center}\n::: {.column width=\"20%\"}\n**Goal:**\n\n:::\n\n::: {.column width=\"80%\"}\ninvestigate the association between smoking and lung capacity using data from 345 adolescents between the ages of 10 and 19\n:::\n\n::::\n\n\n:::: {.columns align=center}\n::: {.column width=\"20%\"}\n**Wrinkle:**\n:::\n\n::: {.column width=\"80%\"}\nLung function is expected to increase during adolescence, but smoking may slow it's progression\n\n:::\n\n::::\n\n<br>\n\n:::: {.columns align=center}\n::: {.column width=\"20%\"}\n**Data:**\n:::\n\n::: {.column width=\"80%\"}\nVariable | Description\n:---------|:---------------\n`FEV`    | forced expiratory volume (in liters per second)\n`Age`    | age in years\n`Smoke`  | `Smoker` or `Nonsmoker`\n\n:::\n\n::::\n\n\n\n\n\n:::{.footer}\nSource: Rosner (2006) \n:::\n\n## EDA\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](08-mlr-categorical_files/figure-revealjs/unnamed-chunk-1-1.svg){fig-align='center' width=800}\n:::\n:::\n\n\n## EDA\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](08-mlr-categorical_files/figure-revealjs/unnamed-chunk-2-1.svg){fig-align='center' width=800}\n:::\n:::\n\n\n## EDA\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](08-mlr-categorical_files/figure-revealjs/unnamed-chunk-3-1.svg){fig-align='center' width=800}\n:::\n:::\n\n\n## Indicator variable\n\nRegression requires a numeric representation of all variables\n\n<br>\n\nCreate a `Smoker` indicator variable:\n\n- `Smoker` = 1\n\n- `Nonsmoker` = 0\n\n\n## Example 1\n\n- For each regression model on the handout, sketch the fitted model on the whiteboard\n\n- Each fitted model will have two lines: one for smokers, one for nonsmokers\n\n- Work with your neighbors\n\n\n## Model 1\n\n$\\mu(y|x) = 10 +  1 \\mathtt{age} -2 \\mathtt{smoker}$\n\n\n## Model 2\n\n$\\mu(y|x) = 5 +  1 \\mathtt{age} -0.5 \\mathtt{age \\times smoker}$\n\n\n## Model 3\n\n$\\begin{split}\\mu(y|x) = 4  &+  0.5 \\mathtt{age} + 3\\mathtt{smoker} -0.5 \\mathtt{age \\times smoker} \\end{split}$\n\n\n## Parallel lines model\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](08-mlr-categorical_files/figure-revealjs/unnamed-chunk-4-1.svg){fig-align='center' width=384}\n:::\n:::\n\n\nLung function develops at the same pace, but always lower for smokers\n\n## Different slopes model\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](08-mlr-categorical_files/figure-revealjs/unnamed-chunk-5-1.svg){fig-align='center' width=600}\n:::\n:::\n\n\nAdolescents start with similar lung capacity, but smokers develop at a slower rate\n\n\n## Separate lines model\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](08-mlr-categorical_files/figure-revealjs/unnamed-chunk-6-1.svg){fig-align='center' width=600}\n:::\n:::\n\n\nThe smokers/non-smokers have different starting lung capacities and develop at different rates\n\n\n\n<!-- ## Parallel lines model -->\n\n<!-- <br> -->\n\n<!-- $\\mu(y|x) = \\beta_0 + \\beta_1 \\mathtt{smoker} + \\beta_2 \\mathtt{age}$ -->\n\n<!-- . . . -->\n\n<!-- <br> -->\n\n<!-- $\\mu(y|\\mathtt{smoker}, \\mathtt{age}) = \\lbrace \\beta_0 + \\beta_1 (1) \\rbrace + \\beta_2 \\mathtt{age}$ -->\n\n<!-- . . . -->\n\n<!-- <br> -->\n\n<!-- $\\mu(y|\\mathtt{nonsmoker}, \\mathtt{age}) =  \\lbrace \\beta_0 + \\beta_1 (0) \\rbrace + \\beta_2 \\mathtt{age}$ -->\n\n\n## Parallel lines model\n\n<br>\n\n$\\mu(y|x) = \\beta_0 + \\beta_1 \\mathtt{smoker} + \\beta_2 \\mathtt{age}$\n\n<br>\n\n::: {style=\"font-size: 1.2em;\"}\n\n:::{.callout-note}\n# Interpretations\n$\\beta_0=$ y-intercept for non-smokers\n\n$\\beta_0 + \\beta_1=$ y-intercept for smokers\n\n$\\beta_2=$ expected rate of change for both groups\n\n:::\n\n:::\n\n\n\n<!-- ## Different slopes model -->\n\n<!-- <br> -->\n\n<!-- $\\mu(y|x) = \\beta_0 + \\beta_1 \\mathtt{age} + \\beta_2 \\mathtt{age} \\times \\mathtt{smoker}$ -->\n\n<!-- . . . -->\n\n<!-- <br> -->\n\n<!-- :::: {.columns align=center} -->\n<!-- ::: {.column width=\"35%\"} -->\n<!-- $\\mu(y|\\mathtt{smoker}, \\mathtt{age})$ -->\n<!-- ::: -->\n\n<!-- ::: {.column width=\"65%\"} -->\n<!-- $=\\beta_0 + \\beta_1 \\mathtt{age} + \\beta_2 \\mathtt{age} \\times 1$ -->\n\n<!-- $=\\beta_0 + \\lbrace \\beta_1 + \\beta_2 \\rbrace \\mathtt{age}$ -->\n<!-- ::: -->\n\n<!-- :::: -->\n\n\n<!-- . . . -->\n\n<!-- <br> -->\n\n\n<!-- :::: {.columns align=center} -->\n<!-- ::: {.column width=\"40%\"} -->\n<!-- $\\mu(y|\\mathtt{nonsmoker}, \\mathtt{age})$ -->\n<!-- ::: -->\n\n<!-- ::: {.column width=\"60%\"} -->\n<!-- $=\\beta_0 + \\beta_1 \\mathtt{age} + \\beta_2 \\mathtt{age} \\times 0$ -->\n\n<!-- $=\\beta_0 + \\beta_1 \\mathtt{age}$ -->\n<!-- ::: -->\n\n<!-- :::: -->\n\n\n## Different slopes model\n\n<br>\n\n$\\mu(y|x) = \\beta_0 + \\beta_1 \\mathtt{age} + \\beta_2 \\mathtt{age} \\times \\mathtt{smoker}$\n\n<br>\n\n::: {style=\"font-size: 1.2em;\"}\n\n:::{.callout-note}\n# Interpretations\n$\\beta_0=$ y-intercept for both groups\n\n$\\beta_1=$ expected rate of change (slope) for non-smokers\n\n$\\beta_1+\\beta_2=$ expected rate of change (slope) for smokers\n\n:::\n:::\n\n\n<!-- ## Separate lines model -->\n\n<!-- <br> -->\n\n<!-- $\\mu(y|x) = \\beta_0 + \\beta_1 \\mathtt{smoker} + \\beta_2 \\mathtt{age} + \\beta_3 \\mathtt{age} \\times \\mathtt{smoker}$ -->\n\n\n\n<!-- . . . -->\n\n<!-- <br> -->\n\n<!-- :::: {.columns align=center} -->\n<!-- ::: {.column width=\"35%\"} -->\n<!-- $\\mu(y|\\mathtt{smoker}, \\mathtt{age})$ -->\n<!-- ::: -->\n\n<!-- ::: {.column width=\"65%\"} -->\n<!-- $=\\beta_0 + \\beta_1(1) + \\beta_2 \\mathtt{age} + \\beta_3 \\mathtt{age}(1)$ -->\n\n<!-- $= \\lbrace\\beta_0 + \\beta_1 \\rbrace + \\lbrace \\beta_2 + \\beta_3 \\rbrace \\mathtt{age}$ -->\n<!-- ::: -->\n\n<!-- :::: -->\n\n\n<!-- . . . -->\n\n<!-- <br> -->\n\n\n<!-- :::: {.columns align=center} -->\n<!-- ::: {.column width=\"40%\"} -->\n<!-- $\\mu(y|\\mathtt{nonsmoker}, \\mathtt{age})$ -->\n<!-- ::: -->\n\n<!-- ::: {.column width=\"60%\"} -->\n<!-- $=\\beta_0 + \\beta_1(0) + \\beta_2 \\mathtt{age} + \\beta_3 \\mathtt{age}(0)$ -->\n\n<!-- $=\\beta_0 + \\beta_2 \\mathtt{age}$ -->\n<!-- ::: -->\n\n<!-- :::: -->\n\n\n\n## Separate lines model\n\n<br>\n\n$\\mu(y|x) = \\beta_0 + \\beta_1 \\mathtt{smoker} + \\beta_2 \\mathtt{age} + \\beta_3 \\mathtt{age} \\times \\mathtt{smoker}$\n\n\n<br>\n\n::: {style=\"font-size: 1.2em;\"}\n\n:::{.callout-note}\n# Interpretations\n$\\beta_0=$ y-intercept for non-smokers\n\n$\\beta_0 + \\beta_1=$ y-intercept for smokers\n\n$\\beta_2=$ expected rate of change (slope) for non-smokers\n\n$\\beta_2+\\beta_3=$ expected rate of change  (slope) for smokers\n\n:::\n:::\n\n\n## More than 3 categories\n\n\nSuppose we have student survey data and one of the columns records the year in school: \n\n* First year, Sophomore, Junior, and Senior.\n\n\nHow can we include this variable in a multiple regression model?\n\n---\n\n## A potentially bad idea\n\n\nWe could convert the column to numeric\n\n* First year $\\to$ 1\n* Sophomore $\\to$ 2\n* Junior $\\to$ 3\n* Senior $\\to$ 4\n\n. . .\n\n$$\n\\mu(Y|{\\tt classyear}) = \\beta_0 + \\beta_1 {\\tt classyear}\n$$\n\n---\n\n## A good idea\n\nWe can create a series of indicator (dummy) variables to represent the four categories\n\n:::: {.columns}\n\n::: {.column width=\"25%\"}\n|Original|\n|--------|\n| First year|\n| Sophomore|\n|Senior |\n| Senior|\n| Junior|\n| Sophomore|\n:::\n\n\n\n::::\n\n\n---\n\n## A good idea\n\nWe can create a series of indicator (dummy) variables to represent the four categories\n\n:::: {.columns}\n\n::: {.column width=\"25%\"}\n|Original|\n|--------|\n| First year|\n| Sophomore|\n|Senior |\n| Senior|\n| Junior|\n| Sophomore|\n:::\n\n::: {.column width=\"20%\"}\n|FY |\n|--------|\n| 1|\n| 0|\n|0 |\n| 0|\n| 0|\n| 0|\n:::\n\n\n::::\n\n---\n\n## A good idea\n\nWe can create a series of indicator (dummy) variables to represent the four categories\n\n:::: {.columns}\n\n::: {.column width=\"25%\"}\n|Original|\n|--------|\n| First year|\n| Sophomore|\n|Senior |\n| Senior|\n| Junior|\n| Sophomore|\n:::\n\n::: {.column width=\"20%\"}\n|FY |\n|--------|\n| 1|\n| 0|\n|0 |\n| 0|\n| 0|\n| 0|\n:::\n\n::: {.column width=\"20%\"}\n|Soph |\n|--------|\n| 0|\n| 1|\n|0 |\n| 0|\n| 0|\n| 1|\n:::\n\n::::\n\n---\n\n## A good idea\n\nWe can create a series of indicator (dummy) variables to represent the four categories\n\n:::: {.columns}\n\n::: {.column width=\"25%\"}\n|Original|\n|--------|\n| First year|\n| Sophomore|\n|Senior |\n| Senior|\n| Junior|\n| Sophomore|\n:::\n\n::: {.column width=\"20%\"}\n|FY |\n|--------|\n| 1|\n| 0|\n|0 |\n| 0|\n| 0|\n| 0|\n:::\n\n::: {.column width=\"20%\"}\n|So|\n|--------|\n| 0|\n| 1|\n|0 |\n| 0|\n| 0|\n| 1|\n:::\n\n::: {.column width=\"20%\"}\n|Ju|\n|--------|\n| 0|\n| 0|\n|0 |\n| 0|\n| 1|\n| 0|\n:::\n\n::::\n\n\n\n\n# Key idea\n::: {.r-fit-text}\nFor a categorical variable with $k$ levels, \n\n$k-1$ indicator variables are needed.\n:::\n\n\n\n## Example 2\n\n\n- For each sketched regression model, write the mean function for a regression model that matches on the whiteboard\n\n- Note that line type = education level\n\n- Work with your neighbors\n\n\n\n\n## Model 1\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](08-mlr-categorical_files/figure-revealjs/unnamed-chunk-8-1.svg){fig-align='center' width=60%}\n:::\n:::\n\n\n## Model 2\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](08-mlr-categorical_files/figure-revealjs/unnamed-chunk-9-1.svg){fig-align='center' width=60%}\n:::\n:::\n\n\n\n## Model 3\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](08-mlr-categorical_files/figure-revealjs/unnamed-chunk-10-1.svg){fig-align='center' width=60%}\n:::\n:::\n",
    "supporting": [
      "08-mlr-categorical_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}